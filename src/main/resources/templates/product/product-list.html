<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">

    <link rel="stylesheet" th:href="@{https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css}"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link th:href="@{/static/css/style.css}" rel="stylesheet"/>
    <link rel="stylesheet" th:href="@{https://use.fontawesome.com/releases/v5.15.1/css/all.css}"
          integrity="sha384-vp86vTRFVJgpjF9jiIGPEEqYqlDwgyBgEF109VFjmqGmIY/Y4HV4d3Gp2irVfcrp" crossorigin="anonymous">
    <script type="text/javascript" th:src="@{/static/js/scripts.js}"></script>

    <title th:text="#{product.table.title}">Sąrašas</title>
</head>
<body>
<div class="container">
    <h1 th:text="#{product.table.title}">Produktų sąrašas:</h1>
    <table class="table table-hover">
        <thead class="thead-dark">
        <tr>
            <th scope="col" >
                <a class="btn text-light font-weight-bold disabled">
                <span th:text="ID">
                    ID
                </span>
                </a>
            </th>

            <th scope="col">
                <a class="btn text-light font-weight-bold" th:with="direction=${productsPage.sort.getOrderFor('name')?.direction}"
                   th:href="@{?sort=name,{dir}(dir=${direction?.name() == 'ASC' ? 'DESC' : 'ASC'})}">
                    <span th:text="#{product.table.name}">
                        Pavadinimas
                    </span>
                    <i th:if="${direction != null}"
                       class="fas" th:classappend="${direction.ascending ? 'fa-arrow-down' : 'fa-arrow-up'}"></i>
                </a>
            </th>

            <th scope="col">
                <a class="btn text-light font-weight-bold" th:with="direction=${productsPage.sort.getOrderFor('inStock')?.direction}"
                   th:href="@{?sort=inStock,{dir}(dir=${direction?.name() == 'ASC' ? 'DESC' : 'ASC'})}">
                    <span th:text="#{product.table.in-stock}">
                        Kiekis
                    </span>
                    <i th:if="${direction != null}"
                       class="fas" th:classappend="${direction.ascending ? 'fa-arrow-down' : 'fa-arrow-up'}"></i>
                </a>
            </th>

            <th scope="col">
                <a class="btn text-light font-weight-bold" th:with="direction=${productsPage.sort.getOrderFor('price')?.direction}"
                   th:href="@{?sort=price,{dir}(dir=${direction?.name() == 'ASC' ? 'DESC' : 'ASC'})}">
                    <span th:text="#{product.table.price}">
                        Kaina
                    </span>
                    <i th:if="${direction != null}"
                       class="fas" th:classappend="${direction.ascending ? 'fa-arrow-down' : 'fa-arrow-up'}"></i>
                </a>
            </th>

            <th scope="col" >
                <a class="btn text-light font-weight-bold disabled">
                <span th:text="#{product.table.action}">
                    Veiksmai
                </span>
                </a>
            </th>
            <th scope="col" >
                <a class="btn text-warning font-weight-bold" th:href="@{'/product/new'}">
                <span th:text="'+'">
                    +
                </span>
                </a>
            </th>

        </tr>
        </thead>

        <th:block th:if="${productsPage.empty}">
            <p>Produktų nėra</p>
        </th:block>
        <th:block th:if="${not productsPage.empty}">

            <tbody>
            <tr th:each="product: ${productsPage}">
                <th scope="row" th:text="${product.id}"></th>
                <td><a th:href="@{'/product/' + ${product.id}}" class="btn text-info" th:text="${product.name}"></a></td>
                <td th:text="${product.inStock} + ' vnt.'"></td>
                <td th:text="${product.price} + ' €'"></td>
                <td>
                    <a class="btn text-warning" th:href="@{/product/edit-name/{id}(id=${product.getId()})}">
                        <i class="fas fa-pencil-alt"></i>
                    </a>

                    <a class="btn text-warning" th:href="@{/product/edit-product/{id}(id=${product.getId()})}">
                        <i class="fas fa-edit"></i>
                    </a>

                    <a class="btn text-warning" th:href="@{/product/delete/{id}(id=${product.getId()})}">
                        <i class="fas fa-trash-alt"></i>
                    </a>
            </tr>
            </tbody>

        </th:block>
    </table>


    <div>
        <span th:text="#{product.table.total} + ': ' + ${productsPage.getTotalElements()}"></span>
        <th:block th:each="pageNumber: ${#numbers.sequence(0, productsPage.totalPages-1)}">
            <a class='btn text-info' th:classappend="${pageNumber == productsPage.number ? 'disabled' : ''}"
               th:href="@{/templates/product?page={pn}&size={size}(pn=${pageNumber}, size=${productsPage.size})}"
               th:text="${pageNumber+1}">3</a></li>

        </th:block>
    </div>


</div>
<!--<script th:inline="javascript">-->
<!--    document.getElementById("btn-add").addEventListener("click", () => {-->
<!--        window.location = "/product/new";-->
<!--    })-->
<!--</script>-->
</body>

</html>